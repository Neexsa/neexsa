(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["obras"],{"05ee":function(t,a,e){},"1f4f":function(t,a,e){"use strict";var r=e("5530"),n=(e("a9e3"),e("8b37"),e("80d2")),s=e("7560"),o=e("58df");a["a"]=Object(o["a"])(s["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(r["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(n["g"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"4bd4":function(t,a,e){"use strict";var r=e("5530"),n=(e("caad"),e("2532"),e("07ac"),e("4de4"),e("159b"),e("7db0"),e("58df")),s=e("7e2b"),o=e("3206");a["a"]=Object(n["a"])(s["a"],Object(o["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var a=Object.values(t).includes(!0);this.$emit("input",!a)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var a=this,e=function(t){return t.$watch("hasError",(function(e){a.$set(a.errorBag,t._uid,e)}),{immediate:!0})},r={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(a.errorBag.hasOwnProperty(t._uid)||(r.valid=e(t)))})):r.valid=e(t),r},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var a=this.inputs.find((function(a){return a._uid===t._uid}));if(a){var e=this.watchers.find((function(t){return t._uid===a._uid}));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==a._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==a._uid})),this.$delete(this.errorBag,a._uid)}}},render:function(t){var a=this;return t("form",{staticClass:"v-form",attrs:Object(r["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return a.$emit("submit",t)}}},this.$slots.default)}})},"8b37":function(t,a,e){},ba78:function(t,a,e){"use strict";e("05ee")},fb24:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"obras"},[t.showObras?e("v-container",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{staticClass:"mt-10",attrs:{sm12:"",xs12:"",md12:"",lg12:""}},[e("v-card-title",{staticClass:"align-start"},[e("v-sheet",{staticClass:"overflow-hidden mt-n9 transition-swing v-card--material__sheet",staticStyle:{"z-index":"2"},attrs:{color:"brown",width:"100%",elevation:"6","max-width":"100%",rounded:""}},[e("v-theme-provider",{attrs:{dark:""}},[t._t("heading"),e("div",{staticClass:"py-3"},[e("v-row",{staticClass:"px-5 d-flex"},[e("v-col",{staticClass:"text-left",attrs:{cols:"1",sm:"1",md:"1",lg:"1",xs:"1"}},[e("v-btn",{staticClass:"text-left",attrs:{depressed:"",color:"transparent"},on:{click:t.returnHome}},[e("v-icon",{attrs:{dark:"",small:""}},[t._v(" mdi-arrow-left-bold-circle mdi-36px ")])],1)],1),e("v-col",{staticClass:"text-center",attrs:{cols:"11",sm:"11",md:"11",lg:"11",xs:"11"}},[e("span",{staticClass:"text-h7 white--text  v-card--material__title pr-15"},[t._v("Obras")])])],1)],1)],2)],1)],1),e("v-card",{staticClass:"card-obras"},[e("v-container",{staticClass:"py-0"},[e("v-row",{staticClass:"pt-9 px-5"},[[e("v-col",{attrs:{cols:"12",sm:"4",md:"4",lg:"5",xs:"5"}},[e("v-text-field",{attrs:{clearable:"",label:"Pesquisar","append-icon":"mdi-magnify"},model:{value:t.nomePesquisa,callback:function(a){t.nomePesquisa=a},expression:"nomePesquisa"}})],1),e("v-col",{staticStyle:{"text-align":"right"},attrs:{cols:"12",sm:"4",md:"4",lg:"2",xs:"2"}},[e("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey"},on:{click:function(a){return t.getObras()}}},[t._v("Pesquisar")])],1),e("v-col",{staticStyle:{"text-align":"right"},attrs:{cols:"12",sm:"4",md:"4",lg:"5",xs:"5"}},[e("v-btn",{staticClass:"white--text",attrs:{color:"blue"},on:{click:function(a){t.dialogObras=!0}}},[t._v("Adicionar Obra")])],1)]],2),e("v-row",[[e("v-col",{attrs:{cols:"12",md:"12",lg:"12",sm:"12",xs:"12"}},[e("v-simple-table",{staticClass:"color-table",scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v(" Nome das Obras ")]),e("th",{staticClass:"text-center"},[t._v(" Qtd. Frente Trabalho Ativos ")]),e("th",{staticClass:"text-center"},[t._v(" Qtd. Frente Trabalho ")]),e("th",{staticClass:"text-center"},[t._v(" Desativar / Ativar Obra ")]),e("th",{staticClass:"text-center"},[t._v(" Excluir Obra ")])])]),e("tbody",t._l(t.desserts,(function(a){return e("tr",{key:a.obra.nome},[e("td",[t._v(t._s(a.obra.nome))]),e("td",{staticClass:"text-center",staticStyle:{width:"25%"}},[t._v(t._s(a.quantidadeFrenteAtivos))]),e("td",{staticClass:"text-center",staticStyle:{width:"25%"}},[t._v(t._s(a.quantidadeFrenteInativo))]),e("td",{staticClass:"text-center",staticStyle:{width:"12%"}},[e("v-btn",{attrs:{width:"30px",height:"30px",fab:"",dark:"",small:"",color:a.obra.ativo?"orange":"green"},on:{click:function(e){return t.alterarStatusObra(a.obra.nome,a.obra.ativo)}}},[!1===a.obra.ativo?e("v-icon",{attrs:{dark:"",small:""}},[t._v("mdi-play")]):e("v-icon",{attrs:{dark:"",small:""}},[t._v("mdi-pause")])],1)],1),e("td",{staticClass:"text-center",staticStyle:{width:"10%"}},[e("v-btn",{attrs:{width:"30px",height:"30px",fab:"",dark:"",small:"",color:"red"},on:{click:function(e){return t.deletarObra(a.obra.nome)}}},[e("v-icon",{attrs:{dark:"",small:""}},[t._v(" mdi-close ")])],1)],1)])})),0)]},proxy:!0}],null,!1,4056042106)})],1)]],2)],1)],1)],1)],1),e("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:t.dialogObras,callback:function(a){t.dialogObras=a},expression:"dialogObras"}},[[e("v-card",[e("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("Adicionar Obra")]),e("v-card-text",[e("v-form",{ref:"form"},[e("v-container",{attrs:{fluid:""}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("v-text-field",{attrs:{rules:t.rules.name,label:"Nome do Obra",required:"",clearable:""},model:{value:t.novoNomeObra,callback:function(a){t.novoNomeObra=a},expression:"novoNomeObra"}})],1)],1)],1)],1)],1),e("v-card-actions",{staticClass:"justify-end"},[e("v-btn",{attrs:{text:""},on:{click:function(a){t.dialogObras=!1}}},[t._v("Close")]),e("v-btn",{attrs:{color:"green",text:""},on:{click:function(a){return t.verificarFormulario()}}},[t._v("Salvar")])],1)],1)]],2),e("v-snackbar",{attrs:{color:t.colorSnackbar},scopedSlots:t._u([{key:"action",fn:function(a){var r=a.attrs;return[e("v-btn",t._b({attrs:{color:"white",text:""},on:{click:function(a){t.snackbar=!1}}},"v-btn",r,!1),[t._v(" Close ")])]}}],null,!1,482290645),model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v(" "+t._s(t.mensagem)+" ")])],1):t._e(),t.loader?e("div",[e("loader",{attrs:{object:"#ff9633",color1:"#ffffff",color2:"#17fd3d",size:"5",speed:"2",bg:"#343a40",objectbg:"#999793",opacity:"80",name:"circular"}})],1):t._e()],1)},n=[],s=e("1da1"),o=(e("d3b7"),e("96cf"),e("bc3a")),i=e.n(o),c={name:"Obras",data:function(){return{urlProd:"https://neexsa.com.br/api_rh/",loader:!1,desserts:[],showObras:!0,showFrenteTrabalhos:!1,nomeObra:"",novoNomeObra:"",snackbar:!1,dialogObras:!1,mensagem:"",colorSnackbar:"",nomePesquisa:"",rules:{name:[function(t){return(t||"").length>0||"Preencher o Nome da Obra"}]}}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getObras();case 2:case"end":return a.stop()}}),a)})))()},methods:{returnHome:function(){this.$router.push({name:"Home"})},getObras:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.loader=!0,e={method:"POST",url:"".concat(t.urlProd,"obras"),data:{nomePesquisa:t.nomePesquisa?t.nomePesquisa:""}},i()(e).then((function(a){t.desserts=a.data})).catch((function(a){console.log(a),t.snackbar=!0,t.mensagem="Erro ao carregar as Obras",t.colorSnackbar="red"})).finally((function(){t.loader=!1}));case 3:case"end":return a.stop()}}),a)})))()},showFrenteTrabalho:function(t){this.showFrenteTrabalhos=!0,this.showObras=!1,this.nomeObra=t},returnObras:function(){this.showFrenteTrabalhos=!1,this.showObras=!0,this.getObras()},verificarFormulario:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.novoNomeObra?(t.loader=!0,e={method:"POST",url:"".concat(t.urlProd,"nova-obra"),data:{novoNomeObra:t.novoNomeObra}},i()(e).then((function(a){t.snackbar=!0,t.mensagem=a.data.mensagem,t.colorSnackbar="green",t.dialogObras=!1,t.getObras(),t.loader=!1})).catch((function(a){console.log(a),t.snackbar=!0,t.mensagem="Erro ao salvar nova Obra",t.colorSnackbar="red",t.loader=!1})).finally((function(){t.loader=!1}))):(t.snackbar=!0,t.mensagem="Preencha o Campo Nome da Obra",t.colorSnackbar="red",t.loader=!1);case 1:case"end":return a.stop()}}),a)})))()},deletarObra:function(t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loader=!0,r={method:"POST",url:"".concat(a.urlProd,"delete-obra"),data:{nomeObra:t}},i()(r).then((function(t){console.log(t),t.data.obra&&t.data.obra.length>0?(a.snackbar=!0,a.mensagem=t.data.mensagem+": "+t.data.obra,a.colorSnackbar="red",a.dialogObras=!1):(console.log(t.data.mensagem),a.snackbar=!0,a.mensagem=t.data.mensagem,a.colorSnackbar="green",a.dialogObras=!1,a.getObras())})).catch((function(t){console.log(t),a.snackbar=!0,a.mensagem="Erro ao deletar Obra",a.colorSnackbar="red"})).finally((function(){a.loader=!1}));case 3:case"end":return e.stop()}}),e)})))()},alterarStatusObra:function(t,a){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=!a,console.log(t,n),e.loader=!0,s={method:"POST",url:"".concat(e.urlProd,"alterar-status-obra"),data:{nomeObra:t,status:n}},i()(s).then((function(t){console.log(t),t.data.obra&&t.data.obra.length>0?(e.snackbar=!0,e.mensagem=t.data.mensagem+": "+t.data.obra,e.colorSnackbar="red",e.dialogObras=!1):(console.log(t.data.mensagem),e.snackbar=!0,e.mensagem=t.data.mensagem,e.colorSnackbar="green",e.dialogObras=!1,e.getObras())})).catch((function(t){console.log(t),e.snackbar=!0,e.mensagem="Erro ao alterar status da Obras",e.colorSnackbar="red"})).finally((function(){e.loader=!1}));case 5:case"end":return r.stop()}}),r)})))()}}},l=c,d=(e("ba78"),e("2877")),u=e("6544"),b=e.n(u),h=e("8336"),m=e("b0af"),f=e("99d9"),v=e("62ad"),g=e("a523"),p=e("169a"),O=e("0e8f"),x=e("4bd4"),w=e("132d"),k=e("a722"),_=e("0fd9"),C=e("8dd9"),y=e("1f4f"),S=e("2db4"),V=e("8654"),P=e("480e"),$=e("71d9"),T=Object(d["a"])(l,r,n,!1,null,"1665d762",null);a["default"]=T.exports;b()(T,{VBtn:h["a"],VCard:m["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VCol:v["a"],VContainer:g["a"],VDialog:p["a"],VFlex:O["a"],VForm:x["a"],VIcon:w["a"],VLayout:k["a"],VRow:_["a"],VSheet:C["a"],VSimpleTable:y["a"],VSnackbar:S["a"],VTextField:V["a"],VThemeProvider:P["a"],VToolbar:$["a"]})}}]);
//# sourceMappingURL=obras.2b4b50bd.js.map